<launch>

  <arg name="sim" default="false"/>

  <group unless="$(arg sim)">

    <node pkg="rosserial_python" type="serial_node.py" name="serial_node" required="true">
      <remap from="~port" to="/peripherials_ports/arduino_wheels" />
    </node>

    <node name="ddbot_base"  pkg="ddbot_base" type="ddbot_base" required="true"/>
  </group>

  <group if="$(arg sim)">

    <param name="robot_description" textfile="$(find ddbot_description)/urdf/robot.urdf" />

    <node name="urdf_spawner" pkg="gazebo_ros" type="spawn_model"
        args="-z 1.0 -b -urdf -model ddbot -param robot_description" respawn="false" output="screen" />
      <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" />
      <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />
  
  </group>

  <rosparam file="$(find ddbot_control)/config/ddbot_control.yaml" />

  <node name="ddbot_base_controler"  pkg="controller_manager" type="spawner" args="mobile_base_controller" required="true"/>

</launch>